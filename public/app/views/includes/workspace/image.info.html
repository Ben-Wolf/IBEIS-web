<md-dialog id="image-info" aria-label="imageInfo" ng-cloak>
  <md-toolbar>
    <div class="md-toolbar-tools">
      <h2>Image Information: <em>{{ mediaAsset.id }}</em></h2>
      <span flex></span>
      <md-button class="md-icon-button" aria-label="Cancel" ng-click="cancel()">
        <i class="fa fa-remove"></i>
        <md-tooltip md-autohide>
          Return to workspace
        </md-tooltip>
      </md-button>
    </div>
  </md-toolbar>
  <md-dialog-content>
    <!-- image display -->
    <img style="margin: 0 auto; display: block; max-width: 100%; padding-top: .75cm" src="{{ mediaAsset.url }}" />
    <div class="md-dialog-content">
      <!-- image metadata and information -->
      <md-subheader>Date and Time
      </md-subheader>
      <md-list>
        <div ng-if="!edit_datetime" ng-init="edit_datetime=false">
          <md-list-item>
            {{ convertDateTime(mediaAsset.dateTime) }}
            <md-icon-button ng-click="$parent.edit_datetime=true" class="fa fa-edit" style="color: green; padding-left: 15px;"></md-icon-button>
          </md-list-item>
        </div>
        <div ng-if="edit_datetime">
          <md-datepicker ng-model="datetime_model" ng-init="set_datetime_model()"
          md-min-date="min_date" md-max-date="max_date" ng-change="workspace_input.datetime_input = datetime_model.toISOString()"></md-datepicker>
          <!-- &nbsp; -->
          <md-icon-button ng-click="save_datetime(); $parent.edit_datetime=false" class="fa fa-save"></md-icon-button>
        </div>
      </md-list>
      <md-subheader>Marked Individuals</md-subheader>
      <md-list>
        <div ng-if="!edit_marked_individual" ng-init="edit_marked_individual=false">
          <!--md-list-item ng-repeat="ind in mediaAssetContext.MarkedIndividuals"-->
          <md-list-item>
            <!--a href="{{ ind.url }}">{{ ind.individualID }}</a-->
            {{mediaAsset.features[0].individualId}}
            <md-icon-button ng-click="$parent.edit_marked_individual=true" class="fa fa-edit" style="color: green; padding-left: 15px;"></md-icon-button>
          </md-list-item>
        </div>
        <div ng-if="edit_marked_individual">
          <md-input-container >
            <input ng-model="individual_model" ng-value="mediaAsset.features[0].individualId" ng-change="workspace_input.individual_input=individual_model">
          </md-input-container>
          <md-icon-button ng-click="save_marked_individual(); $parent.edit_marked_individual=false" class="fa fa-save"></md-icon-button>
        </div>
      </md-list>
      <md-subheader>Occurences</md-subheader>
      <md-list>
        <md-list-item>
          {{ mediaAsset.occurrenceID }}
        </md-list-item>
      </md-list>
      <md-subheader>Annotations</md-subheader>
      <md-list>
        <md-list-item ng-repeat="ann in mediaAssetContext.Annotations">
          {{ ann.id }}
        </md-list-item>
      </md-list>
      <md-subheader>Encounters</md-subheader>
      <md-list>
        <!--md-list-item ng-repeat="(id, enc) in mediaAssetContext.Encounters"-->
        <md-list-item>
          {{ mediaAsset.features[0].encounterId }}
        </md-list-item>
      </md-list>
      <md-subheader>Metadata</md-subheader>
      <md-list>
        <md-list-item ng-repeat="(k, v) in mediaAsset.metadata" class="md-2-line">
          <div class="md-list-item-text">
            <h3>{{ k }}</h3>
            <p>{{ v }}</p>
          </div>
        </md-list-item>
      </md-list>
      <md-button ng-click="delete_image()">
        Delete Photo
      </md-button>
    </div>
  </md-dialog-content>
</md-dialog>
